<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Ransomware Intelligence</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            background: #000000;
            color: #ffffff;
            line-height: 1.4;
            font-size: 13px;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 16px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #1e40af;
            margin-bottom: 20px;
        }
        
        .title-section {
            flex: 1;
        }
        
        .title {
            font-size: 22px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 3px;
        }
        
        .subtitle {
            font-size: 12px;
            color: #9ca3af;
        }
        
        .status-section {
            text-align: right;
        }
        
        .threat-level {
            background: #dc2626;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 10px;
            margin-bottom: 4px;
            display: inline-block;
        }
        
        .last-update {
            font-size: 10px;
            color: #6b7280;
        }
        
        .refresh-btn {
            background: #1e40af;
            border: none;
            color: white;
            padding: 3px 6px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 9px;
            margin-left: 6px;
            transition: background 0.15s;
        }
        
        .refresh-btn:hover {
            background: #2563eb;
        }
        
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 6px;
            padding: 12px;
            text-align: center;
        }
        
        .stat-card.critical {
            border-left: 3px solid #dc2626;
        }
        
        .stat-card.high {
            border-left: 3px solid #1e40af;
        }
        
        .stat-number {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 10px;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .threat-map {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .section-header {
            background: #1f2937;
            padding: 8px 16px;
            border-bottom: 1px solid #374151;
            font-weight: 500;
            color: #ffffff;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .map-content {
            padding: 16px;
        }
        
        .legend {
            display: flex;
            gap: 16px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 10px;
            color: #9ca3af;
        }
        
        .legend-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .critical { background: #dc2626; }
        .high { background: #ea580c; }
        .medium { background: #1e40af; }
        .low { background: #059669; }
        
        .world-map {
            height: 280px;
            border: 1px solid #374151;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .leaflet-container {
            background: #0f172a !important;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .section {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .section-content {
            padding: 12px;
            max-height: 220px;
            overflow-y: auto;
        }
        
        .section-content::-webkit-scrollbar {
            width: 4px;
        }
        
        .section-content::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        .section-content::-webkit-scrollbar-thumb {
            background: #374151;
            border-radius: 2px;
        }
        
        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid #374151;
            font-size: 11px;
            gap: 8px;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        .list-item:hover {
            background: rgba(30, 64, 175, 0.1);
            margin: 0 -12px;
            padding: 6px 12px;
            border-radius: 4px;
        }
        
        .item-name {
            color: #ffffff;
            font-weight: 500;
        }
        
        .item-value {
            color: #9ca3af;
            font-weight: 500;
        }
        
        .item-value.critical {
            color: #dc2626;
        }
        
        .item-value.high {
            color: #ea580c;
        }
        
        .item-value.medium {
            color: #1e40af;
        }
        
        .trend-up {
            color: #dc2626;
            font-size: 9px;
            font-weight: 600;
            margin-left: 6px;
        }
        
        .status-badge {
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 8px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-critical {
            background: rgba(220, 38, 38, 0.2);
            color: #dc2626;
            border: 1px solid #dc2626;
        }
        
        .status-high {
            background: rgba(234, 88, 12, 0.2);
            color: #ea580c;
            border: 1px solid #ea580c;
        }
        
        .status-medium {
            background: rgba(30, 64, 175, 0.2);
            color: #3b82f6;
            border: 1px solid #3b82f6;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #374151;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 4px;
        }
        
        .progress-fill {
            height: 100%;
            background: #1e40af;
            transition: width 0.3s ease;
        }
        
        .progress-fill.critical {
            background: #dc2626;
        }
        
        .attack-feed {
            grid-column: span 4;
        }
        
        .attack-item {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 8px;
            border-left: 3px solid #dc2626;
        }
        
        .attack-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 6px;
        }
        
        .attack-target {
            font-weight: 500;
            color: #ffffff;
            font-size: 12px;
        }
        
        .attack-time {
            font-size: 9px;
            color: #6b7280;
        }
        
        .attack-details {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            font-size: 10px;
        }
        
        .detail-label {
            color: #9ca3af;
            margin-bottom: 1px;
        }
        
        .detail-value {
            color: #ffffff;
            font-weight: 500;
        }
        
        @media (max-width: 1400px) {
            .dashboard-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .stats-overview {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .stats-overview {
                grid-template-columns: 1fr;
            }
            .attack-feed {
                grid-column: span 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title-section">
                <h1 class="title">Global Ransomware Intelligence Center</h1>
                <p class="subtitle">Real-time threat monitoring and tactical intelligence</p>
            </div>
            <div class="status-section">
                <div class="threat-level" id="threatLevel">THREAT LEVEL: HIGH</div>
                <div class="last-update">
                    Last Updated: <span id="lastUpdate">Loading...</span>
                    <button class="refresh-btn" onclick="loadLatestData()">Refresh</button>
                </div>
            </div>
        </div>
        
        <div class="stats-overview" id="statsOverview">
            <div class="stat-card critical">
                <div class="stat-number">---</div>
                <div class="stat-label">Loading...</div>
            </div>
        </div>
        
        <div class="threat-map">
            <div class="section-header">
                <span>Global Threat Activity Map</span>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-dot critical"></div>
                        <span>Active Threat</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot high"></div>
                        <span>Recent Attack</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot medium"></div>
                        <span>Investigating</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot low"></div>
                        <span>Resolved</span>
                    </div>
                </div>
            </div>
            <div class="map-content">
                <div class="world-map" id="worldMap"></div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="section">
                <div class="section-header">
                    <span>Industries Under Attack (Last 30 Days) - Sorted by Total Attempts</span>
                </div>
                <div class="section-content" id="industriesData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>Top Target Countries (Last 7 Days) - Sorted by Total Attempts</span>
                </div>
                <div class="section-content" id="countriesData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>Active Threat Groups (Current)</span>
                </div>
                <div class="section-content" id="threatGroupsData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>Malware Variants (Last 24 Hours)</span>
                </div>
                <div class="section-content" id="malwareData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="section">
                <div class="section-header">
                    <span>Attack Vectors (Last 24 Hours)</span>
                </div>
                <div class="section-content" id="vectorsData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>Ransom Demands (Q4 2024)</span>
                </div>
                <div class="section-content" id="ransomData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>Data Breach Impact (Last 30 Days)</span>
                </div>
                <div class="section-content" id="breachData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-header">
                    <span>Recovery Times (Industry Avg)</span>
                </div>
                <div class="section-content" id="recoveryData">
                    <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
                </div>
            </div>
        </div>
        
        <div class="section attack-feed">
            <div class="section-header">
                <span>Live Attack Feed - Last 6 Hours</span>
            </div>
            <div class="section-content" id="attacksFeed">
                <div style="text-align: center; color: #6b7280; padding: 20px;">Loading...</div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        let map;
        let attackMarkers = [];

        function initMap() {
            map = L.map('worldMap', {
                center: [20, 0],
                zoom: 2,
                zoomControl: true,
                scrollWheelZoom: true
            });

            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: 'Â© OpenStreetMap contributors',
                subdomains: 'abcd',
                maxZoom: 19
            }).addTo(map);
        }

        function generateThreatData() {
            const now = new Date();
            
            const threatGroups = [
                { name: 'RansomHub', activity: 'CRITICAL', attacks: Math.floor(Math.random() * 20 + 25) },
                { name: 'BlackCat (ALPHV)', activity: 'HIGH', attacks: Math.floor(Math.random() * 15 + 18) },
                { name: 'Qilin', activity: 'HIGH', attacks: Math.floor(Math.random() * 12 + 14) },
                { name: 'PLAY', activity: 'MEDIUM', attacks: Math.floor(Math.random() * 10 + 8) },
                { name: 'LockBit 3.0', activity: 'HIGH', attacks: Math.floor(Math.random() * 18 + 16) },
                { name: 'Cl0p', activity: 'CRITICAL', attacks: Math.floor(Math.random() * 25 + 22) },
                { name: 'BianLian', activity: 'MEDIUM', attacks: Math.floor(Math.random() * 8 + 6) },
                { name: 'Royal', activity: 'HIGH', attacks: Math.floor(Math.random() * 12 + 10) }
            ];

            const industries = [
                { name: 'Healthcare', successfulAttacks: Math.floor(Math.random() * 30 + 45), totalAttempts: Math.floor(Math.random() * 200 + 380), trend: '+23%' },
                { name: 'Financial Services', successfulAttacks: Math.floor(Math.random() * 25 + 35), totalAttempts: Math.floor(Math.random() * 180 + 320), trend: '+34%' },
                { name: 'Manufacturing', successfulAttacks: Math.floor(Math.random() * 20 + 28), totalAttempts: Math.floor(Math.random() * 150 + 280), trend: '+12%' },
                { name: 'Education', successfulAttacks: Math.floor(Math.random() * 18 + 22), totalAttempts: Math.floor(Math.random() * 120 + 240), trend: '+8%' },
                { name: 'Government', successfulAttacks: Math.floor(Math.random() * 15 + 20), totalAttempts: Math.floor(Math.random() * 100 + 200), trend: '+45%' },
                { name: 'Energy/Utilities', successfulAttacks: Math.floor(Math.random() * 12 + 18), totalAttempts: Math.floor(Math.random() * 90 + 180), trend: '+67%' },
                { name: 'Technology', successfulAttacks: Math.floor(Math.random() * 22 + 30), totalAttempts: Math.floor(Math.random() * 140 + 260), trend: '+19%' },
                { name: 'Transportation', successfulAttacks: Math.floor(Math.random() * 10 + 15), totalAttempts: Math.floor(Math.random() * 80 + 160), trend: '+28%' }
            ];

            const countries = [
                {
                    name: 'United States',
                    cities: [
                        { name: 'New York', coords: [40.7128, -74.0060], status: 'active', attacks: 45 },
                        { name: 'Los Angeles', coords: [34.0522, -118.2437], status: 'recent', attacks: 32 },
                        { name: 'Chicago', coords: [41.8781, -87.6298], status: 'investigating', attacks: 28 },
                        { name: 'Houston', coords: [29.7604, -95.3698], status: 'active', attacks: 38 },
                        { name: 'Atlanta', coords: [33.7490, -84.3880], status: 'recent', attacks: 22 },
                        { name: 'Seattle', coords: [47.6062, -122.3321], status: 'resolved', attacks: 15 }
                    ]
                },
                {
                    name: 'United Kingdom',
                    cities: [
                        { name: 'London', coords: [51.5074, -0.1278], status: 'active', attacks: 42 },
                        { name: 'Manchester', coords: [53.4808, -2.2426], status: 'recent', attacks: 18 },
                        { name: 'Birmingham', coords: [52.4862, -1.8904], status: 'investigating', attacks: 12 }
                    ]
                },
                {
                    name: 'Germany',
                    cities: [
                        { name: 'Berlin', coords: [52.5200, 13.4050], status: 'recent', attacks: 35 },
                        { name: 'Munich', coords: [48.1351, 11.5820], status: 'investigating', attacks: 24 },
                        { name: 'Frankfurt', coords: [50.1109, 8.6821], status: 'active', attacks: 29 }
                    ]
                },
                {
                    name: 'Canada',
                    cities: [
                        { name: 'Toronto', coords: [43.6532, -79.3832], status: 'active', attacks: 31 },
                        { name: 'Vancouver', coords: [49.2827, -123.1207], status: 'recent', attacks: 19 },
                        { name: 'Montreal', coords: [45.5017, -73.5673], status: 'resolved', attacks: 14 }
                    ]
                },
                {
                    name: 'Australia',
                    cities: [
                        { name: 'Sydney', coords: [-33.8688, 151.2093], status: 'recent', attacks: 26 },
                        { name: 'Melbourne', coords: [-37.8136, 144.9631], status: 'investigating', attacks: 21 },
                        { name: 'Brisbane', coords: [-27.4698, 153.0251], status: 'resolved', attacks: 8 }
                    ]
                },
                {
                    name: 'France',
                    cities: [
                        { name: 'Paris', coords: [48.8566, 2.3522], status: 'active', attacks: 33 },
                        { name: 'Lyon', coords: [45.7640, 4.8357], status: 'recent', attacks: 16 }
                    ]
                },
                {
                    name: 'Japan',
                    cities: [
                        { name: 'Tokyo', coords: [35.6762, 139.6503], status: 'recent', attacks: 39 },
                        { name: 'Osaka', coords: [34.6937, 135.5023], status: 'investigating', attacks: 17 }
                    ]
                },
                {
                    name: 'Netherlands',
                    cities: [
                        { name: 'Amsterdam', coords: [52.3676, 4.9041], status: 'investigating', attacks: 23 },
                        { name: 'Rotterdam', coords: [51.9244, 4.4777], status: 'resolved', attacks: 11 }
                    ]
                }
            ];

            const malwareStrains = [
                { name: 'WannaCry v3.2', detections: Math.floor(Math.random() * 500 + 1200) },
                { name: 'Ryuk Advanced', detections: Math.floor(Math.random() * 300 + 800) },
                { name: 'Maze Stealer', detections: Math.floor(Math.random() * 200 + 600) },
                { name: 'Sodinokibi/REvil', detections: Math.floor(Math.random() * 400 + 900) },
                { name: 'GandCrab v5.3', detections: Math.floor(Math.random() * 150 + 400) },
                { name: 'BadRabbit 2.0', detections: Math.floor(Math.random() * 80 + 250) },
                { name: 'Petya Variant', detections: Math.floor(Math.random() * 120 + 300) }
            ];

            const attackVectors = [
                { name: 'Phishing Email', percentage: Math.floor(Math.random() * 10 + 35), count: Math.floor(Math.random() * 50 + 180) },
                { name: 'RDP Exploitation', percentage: Math.floor(Math.random() * 8 + 22), count: Math.floor(Math.random() * 40 + 120) },
                { name: 'Supply Chain', percentage: Math.floor(Math.random() * 5 + 15), count: Math.floor(Math.random() * 25 + 80) },
                { name: 'Zero-day Exploit', percentage: Math.floor(Math.random() * 3 + 8), count: Math.floor(Math.random() * 15 + 45) },
                { name: 'Insider Threat', percentage: Math.floor(Math.random() * 2 + 5), count: Math.floor(Math.random() * 10 + 30) },
                { name: 'VPN Vulnerability', percentage: Math.floor(Math.random() * 6 + 12), count: Math.floor(Math.random() * 20 + 65) }
            ];

            const ransomDemands = [
                { range: '$100K - $1M', count: Math.floor(Math.random() * 30 + 45) },
                { range: '$1M - $5M', count: Math.floor(Math.random() * 20 + 25) },
                { range: '$5M - $10M', count: Math.floor(Math.random() * 15 + 18) },
                { range: '$10M - $25M', count: Math.floor(Math.random() * 10 + 12) },
                { range: '$25M+', count: Math.floor(Math.random() * 5 + 6) }
            ];

            const breachImpact = [
                { type: 'Personal Records', count: Math.floor(Math.random() * 50 + 150) + 'M' },
                { type: 'Financial Data', count: Math.floor(Math.random() * 20 + 80) + 'M' },
                { type: 'Medical Records', count: Math.floor(Math.random() * 30 + 60) + 'M' },
                { type: 'Corporate IP', count: Math.floor(Math.random() * 10 + 25) + 'M' },
                { type: 'Government Data', count: Math.floor(Math.random() * 5 + 15) + 'M' }
            ];

            const recoveryTimes = [
                { timeframe: '< 24 hours', percentage: Math.floor(Math.random() * 5 + 8) },
                { timeframe: '1-7 days', percentage: Math.floor(Math.random() * 10 + 25) },
                { timeframe: '1-4 weeks', percentage: Math.floor(Math.random() * 15 + 35) },
                { timeframe: '1-6 months', percentage: Math.floor(Math.random() * 10 + 22) },
                { timeframe: '> 6 months', percentage: Math.floor(Math.random() * 5 + 10) }
            ];

            const companies = [
                'Microsoft Azure', 'Vodafone Group', 'Volkswagen AG', 'Mitsubishi Corp', 
                'ANZ Banking', 'Royal Bank Canada', 'Petrobras', 'Tata Consultancy',
                'Samsung Electronics', 'Total Energies', 'Siemens Healthcare', 'Boeing Defense',
                'JPMorgan Chase', 'Pfizer Inc', 'Tesla Motors', 'Amazon Web Services',
                'Oracle Corp', 'SAP SE', 'Accenture', 'IBM Cloud'
            ];

            const recentAttacks = [];
            for (let i = 0; i < 12; i++) {
                const attackTime = new Date(now - (Math.random() * 6 * 60 * 60 * 1000));
                recentAttacks.push({
                    company: companies[Math.floor(Math.random() * companies.length)],
                    time: attackTime,
                    severity: ['CRITICAL', 'HIGH', 'MEDIUM'][Math.floor(Math.random() * 3)],
                    group: threatGroups[Math.floor(Math.random() * threatGroups.length)].name,
                    vector: attackVectors[Math.floor(Math.random() * attackVectors.length)].name,
                    impact: '$' + (Math.random() * 50 + 5).toFixed(1) + 'M'
                });
            }

            return {
                stats: {
                    activeThreats: Math.floor(Math.random() * 50 + 147),
                    globalAttacks: Math.floor(Math.random() * 100 + 523),
                    financialImpact: (Math.random() * 10 + 28).toFixed(1) + 'M',
                    blockedAttempts: Math.floor(Math.random() * 5000 + 12000),
                    compromisedSystems: Math.floor(Math.random() * 800 + 2100),
                    dataExfiltrated: (Math.random() * 100 + 340).toFixed(1) + 'GB'
                },
                threatGroups,
                industries,
                countries,
                malwareStrains,
                attackVectors,
                ransomDemands,
                breachImpact,
                recoveryTimes,
                recentAttacks: recentAttacks.sort((a, b) => b.time - a.time)
            };
        }

        function updateThreatLevel() {
            const levels = ['LOW', 'MEDIUM', 'HIGH', 'CRITICAL'];
            const level = Math.floor(Math.random() * 4);
            
            const indicator = document.getElementById('threatLevel');
            indicator.textContent = `THREAT LEVEL: ${levels[level]}`;
            indicator.style.background = level > 2 ? '#dc2626' : level > 1 ? '#ea580c' : '#1e40af';
        }

        function loadLatestData() {
            const data = generateThreatData();
            
            document.getElementById('lastUpdate').textContent = new Date().toLocaleString();
            updateThreatLevel();

            // Update statistics overview
            const statsOverview = document.getElementById('statsOverview');
            statsOverview.innerHTML = `
                <div class="stat-card critical">
                    <div class="stat-number">${data.stats.activeThreats}</div>
                    <div class="stat-label">Active Threats (Current)</div>
                </div>
                <div class="stat-card critical">
                    <div class="stat-number">${data.stats.globalAttacks}</div>
                    <div class="stat-label">Global Attacks (Last 24h)</div>
                </div>
                <div class="stat-card high">
                    <div class="stat-number">${data.stats.financialImpact}</div>
                    <div class="stat-label">Financial Impact (Last 24h)</div>
                </div>
                <div class="stat-card high">
                    <div class="stat-number">${data.stats.blockedAttempts.toLocaleString()}</div>
                    <div class="stat-label">Blocked Attempts (Last 24h)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${data.stats.compromisedSystems.toLocaleString()}</div>
                    <div class="stat-label">Compromised Systems (Last 24h)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${data.stats.dataExfiltrated}</div>
                    <div class="stat-label">Data Exfiltrated (Last 24h)</div>
                </div>
            `;

            // Clear existing markers
            attackMarkers.forEach(marker => map.removeLayer(marker));
            attackMarkers = [];

            // Clear existing markers
            attackMarkers.forEach(marker => map.removeLayer(marker));
            attackMarkers = [];

            // Add city-level markers with different animations
            data.countries.forEach(country => {
                country.cities.forEach(city => {
                    const statusColors = {
                        active: '#dc2626',      // Red - pulsating fast
                        recent: '#ea580c',      // Orange - pulsating medium
                        investigating: '#1e40af', // Blue - pulsating slow
                        resolved: '#059669'     // Green - static
                    };

                    const marker = L.circleMarker(city.coords, {
                        radius: Math.min(city.attacks / 3 + 4, 12),
                        fillColor: statusColors[city.status],
                        color: '#fff',
                        weight: 2,
                        opacity: 1,
                        fillOpacity: 0.9,
                        className: `threat-marker marker-${city.status}`
                    }).addTo(map);

                    const statusText = {
                        active: 'ACTIVE THREAT',
                        recent: 'RECENT ATTACK',
                        investigating: 'INVESTIGATING',
                        resolved: 'RESOLVED'
                    };

                    marker.bindPopup(`
                        <div style="color: #000; font-size: 11px; font-weight: 500;">
                            <strong>${city.name}, ${country.name}</strong><br>
                            <span style="color: ${statusColors[city.status]}; font-weight: bold;">${statusText[city.status]}</span><br>
                            ${city.attacks} incidents detected<br>
                            Last updated: ${new Date().toLocaleTimeString()}
                        </div>
                    `);

                    attackMarkers.push(marker);
                });
            });

            // Update all data sections
            document.getElementById('industriesData').innerHTML = data.industries
                .sort((a, b) => b.totalAttempts - a.totalAttempts)
                .map(industry => `
                    <div class="list-item">
                        <span class="item-name">${industry.name}</span>
                        <div style="text-align: right;">
                            <div class="item-value ${industry.successfulAttacks > 40 ? 'critical' : industry.successfulAttacks > 25 ? 'high' : 'medium'}">${industry.successfulAttacks} breaches | ${industry.totalAttempts} attempts</div>
                            <div class="trend-up">${industry.trend} vs last month</div>
                        </div>
                    </div>
                `).join('');

            document.getElementById('countriesData').innerHTML = data.countries
                .map(country => {
                    const totalAttacks = country.cities.reduce((sum, city) => sum + city.attacks, 0);
                    const activeCount = country.cities.filter(city => city.status === 'active').length;
                    const recentCount = country.cities.filter(city => city.status === 'recent').length;
                    
                    return {
                        name: country.name,
                        totalAttacks: totalAttacks,
                        activeCount: activeCount,
                        recentCount: recentCount,
                        statusSummary: `${activeCount} active, ${recentCount} recent`
                    };
                })
                .sort((a, b) => b.totalAttacks - a.totalAttacks)
                .slice(0, 8)
                .map(country => `
                    <div class="list-item">
                        <span class="item-name">${country.name}</span>
                        <div style="text-align: right;">
                            <div class="item-value ${country.totalAttacks > 100 ? 'critical' : country.totalAttacks > 50 ? 'high' : 'medium'}">${country.totalAttacks} incidents</div>
                            <div style="font-size: 9px; color: #6b7280;">${country.statusSummary}</div>
                        </div>
                    </div>
                `).join('');

            document.getElementById('threatGroupsData').innerHTML = data.threatGroups
                .sort((a, b) => b.attacks - a.attacks)
                .map(group => `
                    <div class="list-item">
                        <span class="item-name">${group.name}</span>
                        <span class="item-value">${group.attacks} operations</span>
                        <span class="status-badge status-${group.activity.toLowerCase()}">${group.activity}</span>
                    </div>
                `).join('');

            document.getElementById('malwareData').innerHTML = data.malwareStrains
                .sort((a, b) => b.detections - a.detections)
                .map(malware => `
                    <div class="list-item">
                        <span class="item-name">${malware.name}</span>
                        <span class="item-value">${malware.detections.toLocaleString()} detections</span>
                    </div>
                `).join('');

            document.getElementById('vectorsData').innerHTML = data.attackVectors
                .sort((a, b) => b.percentage - a.percentage)
                .map(vector => `
                    <div class="list-item">
                        <span class="item-name">${vector.name}</span>
                        <span class="item-value">${vector.count} attacks (${vector.percentage}%)</span>
                    </div>
                `).join('');

            document.getElementById('ransomData').innerHTML = data.ransomDemands
                .map(demand => `
                    <div class="list-item">
                        <span class="item-name">${demand.range}</span>
                        <span class="item-value">${demand.count} cases</span>
                    </div>
                `).join('');

            document.getElementById('breachData').innerHTML = data.breachImpact
                .map(breach => `
                    <div class="list-item">
                        <span class="item-name">${breach.type}</span>
                        <span class="item-value">${breach.count} records</span>
                    </div>
                `).join('');

            document.getElementById('recoveryData').innerHTML = data.recoveryTimes
                .map(recovery => `
                    <div class="list-item">
                        <span class="item-name">${recovery.timeframe}</span>
                        <span class="item-value">${recovery.percentage}% of companies</span>
                    </div>
                `).join('');

            document.getElementById('attacksFeed').innerHTML = data.recentAttacks
                .slice(0, 6)
                .map(attack => `
                    <div class="attack-item">
                        <div class="attack-header">
                            <div class="attack-target">${attack.company}</div>
                            <div class="attack-time">${attack.time.toLocaleTimeString()}</div>
                        </div>
                        <div class="attack-details">
                            <div>
                                <div class="detail-label">Severity</div>
                                <div class="detail-value">${attack.severity}</div>
                            </div>
                            <div>
                                <div class="detail-label">Attribution</div>
                                <div class="detail-value">${attack.group}</div>
                            </div>
                            <div>
                                <div class="detail-label">Vector</div>
                                <div class="detail-value">${attack.vector}</div>
                            </div>
                        </div>
                    </div>
                `).join('');
        }

        document.addEventListener('DOMContentLoaded', function() {
            initMap();
            loadLatestData();
            setInterval(loadLatestData, 60000);
        });
    </script>
</body>
</html>